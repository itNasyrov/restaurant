# restaurant
## Модуль Роль (Role)

### Назначение

Модуль Роль предназначен для работы с ролями ресторана с целью 
присваивания определенным пользователям их роли. 
 Модуль позволяет:
 * добавлять, удалять, обновлять, просматривать роли
 * получать список имеющихся ролей
 
### Структура

##### Роль (role)
1. **id** long — первичный ключ    
2. **name** String — наименование роли
                  



### Обращение к модулю
Обращение к модулю осуществляется на основании REST запросов с корнем

 ```/role```
 
#### Список запросов REST:

1. Добавить роль:
    
   ```/add```
   
    Post метод. Производится добавление данных о роли, находящихся в теле запроса, в БД.
   
2. Обновить роль:
     
   ```/update```
    Изменить роль.
    Post метод. Производится изменение существующей роли в БД. Обновленные данные расположены в теле запроса.

3. Удалить роль:
        
      ```/delete/{id}```
       
   Delete метод. Производится удаление существующей роли в БД. 
3. Получить список всех ролей: 
 
   ```/all```
   
 
   Get метод. Производится получение списка существующих ролей в БД.      
 
4. Получить роль по указанному номеру роли:  
 
   ```/get/id/{id}```
   
   Get метод. Получаем роль по относящимуся к нему ID (номеру).   
 
5. Получить список всех ролей:
 
   ```/get/name/{name}```
   
   Get метод. Получаем роль по относящемуся к нему имени. 




## Модуль Пользователь (User)

### Назначение

Модуль Пользователь является вспомогательным для модуля Роль.
Модуль предоставляет возможность регистрировать пользователей. Также его важная
составляющая часть это:
 * добавлять, удалять, изменять, просматривать пользователей
 * получать информацию о пользователе
 
### Структура

##### Мероприятие (user)
1. **id** long — первичный ключ    
2. **name** String — имя пользователя                 
3. **login** String — логин пользователя
4. **password** String — пароль пользователя    
5. **roleId** long — внешний ключ из таблицы Role          
                      

  
### Обращение к модулю
Обращение к модулю осуществляется на основании REST запросов с корнем

 ```/user```
 
#### Список запросов REST:

1. Добавить пользователя:
    
   ```/add```
   
    Post метод. Производится добавление данных о пользователе, находящихся в теле запроса, в БД.    
    
2. Получить список всех пользователей: 
     
   ```/all```       
     
   Get метод. Производится получение списка существующих пользователей в БД.      
   
3. Обновить пользователя:
     
   ```/update```
    Изменить пользователя.
    Post метод. Производится изменение существующего пользователя в БД. Обновленные данные расположены в теле запроса.

3. Удалить пользователя:
        
      ```/delete/{id}```
       
   Delete метод. Производится удаление существующего пользователя в БД. 
3. Получить список всех пользователей: 
 
   ```/all```   
 
   Get метод. Производится получение списка существующих пользователей в БД.      
 
4. Получить пользователя по указанному номеру пользователя:  
 
   ```/get/id/{id}```
   
   Get метод. Получаем пользователя по относящемуся к нему ID (номеру).   
 
5. Получить список всех пользователей:
 
   ```/get/name/{name}```
   
   Get метод. Получаем пользователя по относящемуся к нему имени. 

## Модуль Заказы (Order)

### Назначение

Модуль Заказы предназначен для работы с заказами, сформированными 
из блюд меню. Заказ состоит из основной части, характеризующей заказ, и переменной части,
состоящей из блюд меню. Модуль позволяет:
 * добавлять, удалять, обновлять, просматривать заказы
 * добавлять блюда в заказ
 * менять статус заказа
 * получать информацию о заказах 
 
### Структура

##### Заказы (orders)
1. **id** bigint — первичный ключ    
2. **date** timestamp — дата и время заказа  
3. **date_ready** timestamp — дата и время выполнения заказа
3. **customer character** varying(255) — заказчик
4. **tableNumber** integer — номер столика
5. **status** character varying(20) — статус заказа [новый, готов]
6. **comment** character varying(255) — комментарий к заказа

##### Строчки заказа (order_items)
1. **id** bigint — первичный ключ    
2. **name** character varying(255) — наименование блюда   
3. **amount** integer — количество

### Обращение к модулю
Обращение к модулю осуществляется на основании REST запросов с корнем

 ```/order```
 
#### Список запросов REST:

1. Добавить заказ.  
    
   ```/add```
   
    Post метод. Производится добавление данных о заказе, находящихся в теле запроса, в БД.
   
2. Обновить заказ.
     
   ```/update```
   
    Post метод. Производится обновление существующего заказа в БД. Обновленные данные расположены в теле запроса.
   
3. Просмотреть заказ по указанному номеру заказа: 
 
   ```/get/{id}```
   
    Get метод. В запросе передается номер заказ {id}. В ответе получаем данные о заказе. Если заказ с номером {id} не найден, то возвращается пустой ответ. 
 
4. Удалить заказ по указанному номеру заказа:  
 
   ```/delete/{id}```
   
   Delete метод. Удаляется заказ с указанным номером {id} из базы данных.
 
5. Получить список заказов, относящимуся к определенному столику. 
 
   ```/table/{table}```
   
   Get метод. Получаем список заказов, относящимся к столику, номер которого {table} указан в запросе.
   
6. Получить список всех заказов. 
 
   ```/all```
   
   Get метод. Получаем список всех заказов из БД.
 
7. Получить список заказов с определенным статусом. 
 
   ```/status/{status}```
   
   Get метод. Получаем список заказов из БД со статусом, введенном в запросе {status}. Если указан несуществующий статус, возвращается пустой список.
  
8. Получаем последний заказ для столика.
  
   ```/lastorder/{table}```
   
   Get метод. Получаем последний заказ для столика, номер которого {table} указан в запросе.                                                            

9. Добавить блюдо в заказ.
  
   ```/additem/{id}```
   
   Get метод. Производится добавление блюда, передаваемого в теле запроса, к 
    заказу, номер которого {id} задается.
  
10. Изменить состояние заказа. 
 
    ```/changestatus/{id}/{status}```
    
     Post метод. Меняем сосояние заказ {status} для заказа с номером {id}. Если введем несуществующий номер заказа, то возвращается пустой ответ. 
     Если введем несуществующий статус, то статус заказа не изменится.
     Если введем статус *готов*, то поле **date_ready** заказа заполняется текущими датой и временем.
